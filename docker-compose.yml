version: '3'
services:
  elvis_api:
    build:
      context: .
      args:
        - PORT
    env_file: .env
    ports:
      - "${PORT}:${PORT}"
    restart: always
    links:
      - orientdb
    volumes:
      - /var/lib/elvis/rawdata:/rawdata:ro
    logging:
      driver: "json-file"
      options:
        max-size: "200k"
        max-file: "3"
  orientdb:
    image: orientdb:2.2.30
    restart: always
    ports:
      - "${ORIENTDB_PORT}:2424"
      - "2480:2480"

